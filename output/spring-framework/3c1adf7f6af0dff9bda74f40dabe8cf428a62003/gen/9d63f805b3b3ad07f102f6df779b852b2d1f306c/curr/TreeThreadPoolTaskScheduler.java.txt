CompilationUnit:
  TypeDeclaration:
    SingleMemberAnnotation:
      SimpleName:SuppressWarnings
      StringLiteral:"serial"
    Modifier:public
    SimpleName:ThreadPoolTaskScheduler
    SimpleType:ExecutorConfigurationSupport
      SimpleName:ExecutorConfigurationSupport
    SimpleType:AsyncListenableTaskExecutor
      SimpleName:AsyncListenableTaskExecutor
    SimpleType:SchedulingTaskExecutor
      SimpleName:SchedulingTaskExecutor
    SimpleType:TaskScheduler
      SimpleName:TaskScheduler
    MethodDeclaration:
      Modifier:private [I]
      Modifier:final [I]
      Modifier:public
      PrimitiveType:void
      SimpleName:setPoolSize
      SingleVariableDeclaration:
        PrimitiveType:int
        SimpleName:poolSize
      Block:
        ExpressionStatement:
          MethodInvocation:
            SimpleName:Assert
            SimpleName:isTrue
            InfixExpression:>
              SimpleName:poolSize
              NumberLiteral:0
            StringLiteral:"'poolSize' must be 1 or higher"
        ExpressionStatement:
          Assignment:=
            FieldAccess:
              ThisExpression:
              SimpleName:poolSize
            SimpleName:poolSize
        IfStatement:
          InstanceofExpression:
            FieldAccess:
              ThisExpression:
              SimpleName:scheduledExecutor
            SimpleType:ScheduledThreadPoolExecutor
              SimpleName:ScheduledThreadPoolExecutor
          Block:
            ExpressionStatement:
              MethodInvocation:
                ParenthesizedExpression:
                  CastExpression:
                    SimpleType:ScheduledThreadPoolExecutor
                      SimpleName:ScheduledThreadPoolExecutor
                    FieldAccess:
                      ThisExpression:
                      SimpleName:scheduledExecutor
                SimpleName:setCorePoolSize
                SimpleName:poolSize
    MethodDeclaration:
      MarkerAnnotation:
        SimpleName:Override
      Modifier:public
      SimpleType:ListenableFuture
        SimpleName:ListenableFuture
      SimpleName:submitListenable
      SingleVariableDeclaration:
        SimpleType:Runnable
          SimpleName:Runnable
        SimpleName:task
      Block:
        VariableDeclarationStatement:
          SimpleType:ExecutorService
            SimpleName:ExecutorService
          VariableDeclarationFragment:
            SimpleName:executor
            MethodInvocation:
              SimpleName:getScheduledExecutor
        TryStatement:
          Block:
            VariableDeclarationStatement:
              SimpleType:ListenableFutureTask
                SimpleName:ListenableFutureTask
              VariableDeclarationFragment:
                SimpleName:listenableFuture
                ClassInstanceCreation:
                  ParameterizedType:ListenableFutureTask<>
                    SimpleType:ListenableFutureTask
                      SimpleName:ListenableFutureTask
                  SimpleName:task
                  NullLiteral:
            ExpressionStatement:
              MethodInvocation:
                SimpleName:executeAndTrack
                SimpleName:executor
                SimpleName:listenableFuture
            ReturnStatement:
              SimpleName:listenableFuture
          CatchClause:
            SingleVariableDeclaration:
              SimpleType:RejectedExecutionException
                SimpleName:RejectedExecutionException
              SimpleName:ex
            Block:
              ThrowStatement:
                ClassInstanceCreation:
                  SimpleType:TaskRejectedException
                    SimpleName:TaskRejectedException
                  InfixExpression:+
                    StringLiteral:"Executor ["
                    SimpleName:executor
                    StringLiteral:"] did not accept task: "
                    SimpleName:task
                  SimpleName:ex
    MethodDeclaration:
      MarkerAnnotation:
        SimpleName:Override
      Modifier:public
      SimpleType:ListenableFuture
        SimpleName:ListenableFuture
      SimpleName:submitListenable
      SingleVariableDeclaration:
        SimpleType:Callable
          SimpleName:Callable
        SimpleName:task
      Block:
        VariableDeclarationStatement:
          SimpleType:ExecutorService
            SimpleName:ExecutorService
          VariableDeclarationFragment:
            SimpleName:executor
            MethodInvocation:
              SimpleName:getScheduledExecutor
        TryStatement:
          Block:
            VariableDeclarationStatement:
              SimpleType:ListenableFutureTask
                SimpleName:ListenableFutureTask
              VariableDeclarationFragment:
                SimpleName:listenableFuture
                ClassInstanceCreation:
                  ParameterizedType:ListenableFutureTask<>
                    SimpleType:ListenableFutureTask
                      SimpleName:ListenableFutureTask
                  SimpleName:task
            ExpressionStatement:
              MethodInvocation:
                SimpleName:executeAndTrack
                SimpleName:executor
                SimpleName:listenableFuture
            ReturnStatement:
              SimpleName:listenableFuture
          CatchClause:
            SingleVariableDeclaration:
              SimpleType:RejectedExecutionException
                SimpleName:RejectedExecutionException
              SimpleName:ex
            Block:
              ThrowStatement:
                ClassInstanceCreation:
                  SimpleType:TaskRejectedException
                    SimpleName:TaskRejectedException
                  InfixExpression:+
                    StringLiteral:"Executor ["
                    SimpleName:executor
                    StringLiteral:"] did not accept task: "
                    SimpleName:task
                  SimpleName:ex
    MethodDeclaration: [I]
      Modifier:private [I]
      PrimitiveType:void [I]
      SimpleName:executeAndTrack [I]
      SingleVariableDeclaration: [I]
        SimpleType:ExecutorService [I]
          SimpleName:ExecutorService [I]
        SimpleName:executor [I]
      SingleVariableDeclaration: [I]
        SimpleType:ListenableFutureTask [I]
          SimpleName:ListenableFutureTask [I]
        SimpleName:listenableFuture [I]
      Block: [I]
        VariableDeclarationStatement: [I]
          SimpleType:Future [I]
            SimpleName:Future [I]
          VariableDeclarationFragment: [I]
            SimpleName:scheduledFuture [I]
            MethodInvocation: [I]
              SimpleName:executor [I]
              SimpleName:submit [I]
              MethodInvocation: [I]
                SimpleName:errorHandlingTask [I]
                SimpleName:listenableFuture [I]
                BooleanLiteral:false [I]
        ExpressionStatement: [I]
          MethodInvocation: [I]
            FieldAccess: [I]
              ThisExpression: [I]
              SimpleName:listenableFutureMap [I]
            SimpleName:put [I]
            SimpleName:scheduledFuture [I]
            SimpleName:listenableFuture [I]
        ExpressionStatement: [I]
          MethodInvocation: [I]
            SimpleName:listenableFuture [I]
            SimpleName:addCallback [I]
            LambdaExpression: [I]
              VariableDeclarationFragment: [I]
                SimpleName:result [I]
              MethodInvocation: [I]
                SimpleName:listenableFutureMap [I]
                SimpleName:remove [I]
                SimpleName:scheduledFuture [I]
            LambdaExpression: [I]
              VariableDeclarationFragment: [I]
                SimpleName:ex [I]
              MethodInvocation: [I]
                SimpleName:listenableFutureMap [I]
                SimpleName:remove [I]
                SimpleName:scheduledFuture [I]
    MethodDeclaration: [I]
      MarkerAnnotation: [I]
        SimpleName:Override [I]
      Modifier:protected [I]
      PrimitiveType:void [I]
      SimpleName:cancelRemainingTask [I]
      SingleVariableDeclaration: [I]
        SimpleType:Runnable [I]
          SimpleName:Runnable [I]
        SimpleName:task [I]
      Block: [I]
        ExpressionStatement: [I]
          SuperMethodInvocation: [I]
            SimpleName:cancelRemainingTask [I]
            SimpleName:task [I]
        VariableDeclarationStatement: [I]
          SimpleType:ListenableFuture [I]
            SimpleName:ListenableFuture [I]
          VariableDeclarationFragment: [I]
            SimpleName:listenableFuture [I]
            MethodInvocation: [I]
              FieldAccess: [I]
                ThisExpression: [I]
                SimpleName:listenableFutureMap [I]
              SimpleName:get [I]
              SimpleName:task [I]
        IfStatement: [I]
          InfixExpression:!= [I]
            SimpleName:listenableFuture [I]
            NullLiteral: [I]
          Block: [I]
            ExpressionStatement: [I]
              MethodInvocation: [I]
                SimpleName:listenableFuture [I]
                SimpleName:cancel [I]
                BooleanLiteral:true [I]
